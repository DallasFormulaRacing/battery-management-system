#include "thermistor.h"
#include "bms_types.h"
#include "parse.h"
#include <stdint.h>

// TODO: Do testing and generate more accurate values
thermistor_t voltage_temp_lut[] = {
    {2.886662F, 1.793969773F},    {2.886104607F, 1.859897065F},
    {2.885544349F, 1.926096443F}, {2.88498123F, 1.992566656F},
    {2.884415251F, 2.059306471F}, {2.883846415F, 2.126314667F},
    {2.883274724F, 2.193590039F}, {2.882700179F, 2.261131396F},
    {2.882122782F, 2.328937561F}, {2.881542535F, 2.397007372F},
    {2.880959439F, 2.46533968F},  {2.880373496F, 2.53393335F},
    {2.879784707F, 2.60278726F},  {2.879193072F, 2.671900301F},
    {2.878598593F, 2.741271378F}, {2.878001271F, 2.810899408F},
    {2.877401106F, 2.880783321F}, {2.876798098F, 2.950922058F},
    {2.876192248F, 3.021314573F}, {2.875583556F, 3.091959834F},
    {2.874972023F, 3.162856816F}, {2.874357648F, 3.23400451F},
    {2.873740432F, 3.305401917F}, {2.873120374F, 3.377048047F},
    {2.872497473F, 3.448941923F}, {2.871871729F, 3.52108258F},
    {2.871243142F, 3.593469059F}, {2.870611712F, 3.666100416F},
    {2.869977436F, 3.738975715F}, {2.869340314F, 3.812094029F},
    {2.868700346F, 3.885454443F}, {2.868057529F, 3.95905605F},
    {2.867411864F, 4.032897951F}, {2.866763347F, 4.10697926F},
    {2.866111979F, 4.181299097F}, {2.865457757F, 4.25585659F},
    {2.864800679F, 4.330650878F}, {2.864140745F, 4.405681108F},
    {2.863477951F, 4.480946433F}, {2.862812296F, 4.556446016F},
    {2.862143778F, 4.632179027F}, {2.861472395F, 4.708144644F},
    {2.860798144F, 4.784342052F}, {2.860121023F, 4.860770444F},
    {2.859441029F, 4.937429019F}, {2.85875816F, 5.014316983F},
    {2.858072414F, 5.091433549F}, {2.857383787F, 5.168777938F},
    {2.856692276F, 5.246349374F}, {2.85599788F, 5.32414709F},
    {2.855300594F, 5.402170323F}, {2.854600415F, 5.480418318F},
    {2.853897341F, 5.558890324F}, {2.853191368F, 5.637585595F},
    {2.852482492F, 5.716503392F}, {2.851770711F, 5.795642981F},
    {2.85105602F, 5.87500363F},   {2.850338417F, 5.954584616F},
    {2.849617897F, 6.034385217F}, {2.848894456F, 6.114404718F},
    {2.848168091F, 6.194642407F}, {2.847438798F, 6.275097577F},
    {2.846706573F, 6.355769522F}, {2.845971412F, 6.436657545F},
    {2.84523331F, 6.517760948F},  {2.844492264F, 6.599079039F},
    {2.843748269F, 6.680611127F}, {2.84300132F, 6.762356528F},
    {2.842251414F, 6.844314557F}, {2.841498546F, 6.926484534F},
    {2.840742711F, 7.008865781F}, {2.839983905F, 7.091457624F},
    {2.839222122F, 7.174259388F}, {2.838457359F, 7.257270404F},
    {2.83768961F, 7.340490003F},  {2.836918871F, 7.423917518F},
    {2.836145137F, 7.507552286F}, {2.835368402F, 7.591393642F},
    {2.834588662F, 7.675440925F}, {2.833805911F, 7.759693475F},
    {2.833020145F, 7.844150634F}, {2.832231357F, 7.928811743F},
    {2.831439544F, 8.013676146F}, {2.830644699F, 8.098743187F},
    {2.829846817F, 8.18401221F},  {2.829045893F, 8.269482562F},
    {2.828241921F, 8.355153586F}, {2.827434896F, 8.441024631F},
    {2.826624812F, 8.527095042F}, {2.825811663F, 8.613364166F},
    {2.824995445F, 8.699831348F}, {2.82417615F, 8.786495935F},
    {2.823353774F, 8.873357274F}, {2.822528311F, 8.960414708F},
    {2.821699754F, 9.047667584F}, {2.820868099F, 9.135115245F},
    {2.820033338F, 9.222757034F}, {2.819195466F, 9.310592295F},
    {2.818354478F, 9.398620369F}, {2.817510366F, 9.486840597F},
    {2.816663126F, 9.575252317F}, {2.81581275F, 9.663854867F},
    {2.814959232F, 9.752647584F}, {2.814102568F, 9.841629802F},
    {2.813242749F, 9.930800856F}, {2.812379771F, 10.02016008F},
    {2.811513627F, 10.10970679F}, {2.810644309F, 10.19944033F},
    {2.809771814F, 10.28936002F}, {2.808896133F, 10.37946518F},
    {2.80801726F, 10.46975514F},  {2.807135189F, 10.5602292F},
    {2.806249914F, 10.6508867F},  {2.805361428F, 10.74172694F},
    {2.804469725F, 10.83274923F}, {2.803574797F, 10.92395289F},
    {2.80267664F, 11.01533721F},  {2.801775245F, 11.10690151F},
    {2.800870607F, 11.19864508F}, {2.799962718F, 11.29056721F},
    {2.799051573F, 11.38266721F}, {2.798137164F, 11.47494436F},
    {2.797219486F, 11.56739795F}, {2.79629853F, 11.66002727F},
    {2.795374291F, 11.75283158F}, {2.794446762F, 11.84581018F},
    {2.793515937F, 11.93896234F}, {2.792581807F, 12.03228731F},
    {2.791644368F, 12.12578438F}, {2.790703611F, 12.21945281F},
    {2.78975953F, 12.31329184F},  {2.788812119F, 12.40730074F},
    {2.787861371F, 12.50147875F}, {2.786907278F, 12.59582513F},
    {2.785949835F, 12.69033911F}, {2.784989033F, 12.78501994F},
    {2.784024867F, 12.87986684F}, {2.78305733F, 12.97487905F},
    {2.782086415F, 13.0700558F},  {2.781112114F, 13.1653963F},
    {2.780134422F, 13.26089977F}, {2.779153331F, 13.35656542F},
    {2.778168834F, 13.45239246F}, {2.777180925F, 13.5483801F},
    {2.776189596F, 13.64452753F}, {2.775194842F, 13.74083395F},
    {2.774196655F, 13.83729854F}, {2.773195028F, 13.9339205F},
    {2.772189954F, 14.03069899F}, {2.771181427F, 14.1276332F},
    {2.77016944F, 14.2247223F},   {2.769153986F, 14.32196544F},
    {2.768135058F, 14.4193618F},  {2.767112649F, 14.51691053F},
    {2.766086753F, 14.61461077F}, {2.765057362F, 14.71246168F},
    {2.76402447F, 14.81046239F},  {2.762988071F, 14.90861203F},
    {2.761948157F, 15.00690975F}, {2.760904721F, 15.10535467F},
    {2.759857758F, 15.2039459F},  {2.758807259F, 15.30268256F},
    {2.757753219F, 15.40156376F}, {2.756695631F, 15.50058861F},
    {2.755634487F, 15.5997562F},  {2.754569782F, 15.69906563F},
    {2.753501508F, 15.798516F},   {2.75242966F, 15.89810638F},
    {2.751354229F, 15.99783585F}, {2.750275211F, 16.09770349F},
    {2.749192597F, 16.19770837F}, {2.748106382F, 16.29784954F},
    {2.747016559F, 16.39812608F}, {2.745923121F, 16.49853703F},
    {2.744826061F, 16.59908143F}, {2.743725374F, 16.69975834F},
    {2.742621053F, 16.80056679F}, {2.741513091F, 16.90150581F},
    {2.740401482F, 17.00257443F}, {2.73928622F, 17.10377167F},
    {2.738167297F, 17.20509655F}, {2.737044708F, 17.30654808F},
    {2.735918446F, 17.40812526F}, {2.734788505F, 17.50982711F},
    {2.733654879F, 17.61165261F}, {2.73251756F, 17.71360076F},
    {2.731376544F, 17.81567053F}, {2.730231824F, 17.91786093F},
    {2.729083393F, 18.02017091F}, {2.727931246F, 18.12259945F},
    {2.726775376F, 18.22514552F}, {2.725615777F, 18.32780808F},
    {2.724452443F, 18.43058608F}, {2.723285368F, 18.53347849F},
    {2.722114546F, 18.63648423F}, {2.720939971F, 18.73960226F},
    {2.719761637F, 18.84283151F}, {2.718579538F, 18.94617092F},
    {2.717393668F, 19.04961941F}, {2.716204021F, 19.1531759F},
    {2.715010592F, 19.25683932F}, {2.713813374F, 19.36060857F},
    {2.712612362F, 19.46448257F}, {2.711407551F, 19.56846022F},
    {2.710198933F, 19.67254042F}, {2.708986505F, 19.77672207F},
    {2.707770259F, 19.88100406F}, {2.706550191F, 19.98538527F},
    {2.705326295F, 20.08986459F}, {2.704098565F, 20.1944409F},
    {2.702866996F, 20.29911306F}, {2.701631583F, 20.40387996F},
    {2.70039232F, 20.50874045F},  {2.699149201F, 20.61369341F},
    {2.697902223F, 20.71873767F}, {2.696651378F, 20.82387212F},
    {2.695396662F, 20.92909558F}, {2.69413807F, 21.03440691F},
    {2.692875596F, 21.13980495F}, {2.691609236F, 21.24528854F},
    {2.690338985F, 21.35085652F}, {2.689064836F, 21.45650772F},
    {2.687786786F, 21.56224096F}, {2.68650483F, 21.66805508F},
    {2.685218962F, 21.77394889F}, {2.683929178F, 21.87992121F},
    {2.682635472F, 21.98597086F}, {2.681337841F, 22.09209665F},
    {2.68003628F, 22.19829739F},  {2.678730783F, 22.30457189F},
    {2.677421346F, 22.41091895F}, {2.676107965F, 22.51733737F},
    {2.674790634F, 22.62382595F}, {2.673469351F, 22.73038348F},
    {2.67214411F, 22.83700875F},  {2.670814906F, 22.94370057F},
    {2.669481736F, 23.05045771F}, {2.668144595F, 23.15727896F},
    {2.666803479F, 23.2641631F},  {2.665458384F, 23.37110892F},
    {2.664109305F, 23.47811519F}, {2.662756239F, 23.5851807F},
    {2.661399182F, 23.69230421F}, {2.660038129F, 23.79948449F},
    {2.658673077F, 23.90672033F}, {2.657304021F, 24.01401049F},
    {2.655930959F, 24.12135374F}, {2.654553885F, 24.22874884F},
    {2.653172798F, 24.33619457F}, {2.651787692F, 24.44368968F},
    {2.650398564F, 24.55123294F}, {2.649005411F, 24.65882311F},
    {2.647608229F, 24.76645895F}, {2.646207015F, 24.87413923F},
    {2.644801766F, 24.98186269F}, {2.643392477F, 25.08962811F},
    {2.641979147F, 25.19743424F}, {2.64056177F, 25.30527983F},
    {2.639140346F, 25.41316364F}, {2.637714869F, 25.52108443F},
    {2.636285338F, 25.62904097F}, {2.634851749F, 25.73703199F},
    {2.6334141F, 25.84505626F},   {2.631972387F, 25.95311254F},
    {2.630526607F, 26.06119959F}, {2.629076759F, 26.16931615F},
    {2.627622839F, 26.277461F},   {2.626164844F, 26.38563288F},
    {2.624702773F, 26.49383055F}, {2.623236622F, 26.60205278F},
    {2.621766389F, 26.71029833F}, {2.620292072F, 26.81856596F},
    {2.618813668F, 26.92685442F}, {2.617331175F, 27.03516249F},
    {2.615844591F, 27.14348893F}, {2.614353914F, 27.2518325F},
    {2.612859141F, 27.36019198F}, {2.611360271F, 27.46856612F},
    {2.609857301F, 27.57695371F}, {2.60835023F, 27.68535352F},
    {2.606839056F, 27.79376432F}, {2.605323778F, 27.90218489F},
    {2.603804392F, 28.01061401F}, {2.602280898F, 28.11905045F},
    {2.600753294F, 28.22749301F}, {2.599221579F, 28.33594048F},
    {2.597685751F, 28.44439163F}, {2.596145809F, 28.55284526F},
    {2.594601751F, 28.66130017F}, {2.593053576F, 28.76975515F},
    {2.591501283F, 28.878209F},   {2.589944871F, 28.98666054F},
    {2.588384339F, 29.09510856F}, {2.586819685F, 29.20355187F},
    {2.585250909F, 29.3119893F},  {2.583678009F, 29.42041965F},
    {2.582100986F, 29.52884176F}, {2.580519838F, 29.63725444F},
    {2.578934565F, 29.74565653F}, {2.577345166F, 29.85404685F},
    {2.57575164F, 29.96242425F},  {2.574153987F, 30.07078758F},
    {2.572552206F, 30.17913566F}, {2.570946298F, 30.28746737F},
    {2.569336262F, 30.39578154F}, {2.567722097F, 30.50407706F},
    {2.566103804F, 30.61235277F}, {2.564481382F, 30.72060755F},
    {2.562854831F, 30.82884027F}, {2.561224152F, 30.93704983F},
    {2.559589345F, 31.04523509F}, {2.557950409F, 31.15339497F},
    {2.556307346F, 31.26152834F}, {2.554660155F, 31.36963413F},
    {2.553008836F, 31.47771123F}, {2.551353391F, 31.58575855F},
    {2.549693819F, 31.69377504F}, {2.548030122F, 31.80175959F},
    {2.5463623F, 31.90971117F},   {2.544690353F, 32.01762869F},
    {2.543014283F, 32.12551112F}, {2.541334091F, 32.23335739F},
    {2.539649777F, 32.34116648F}, {2.537961342F, 32.44893734F},
    {2.536268787F, 32.55666896F}, {2.534572114F, 32.66436031F},
    {2.532871325F, 32.77201038F}, {2.531166419F, 32.87961816F},
    {2.529457398F, 32.98718267F}, {2.527744265F, 33.09470289F},
    {2.52602702F, 33.20217787F},  {2.524305664F, 33.30960661F},
    {2.522580201F, 33.41698816F}, {2.520850631F, 33.52432155F},
    {2.519116956F, 33.63160583F}, {2.517379177F, 33.73884006F},
    {2.515637298F, 33.8460233F},  {2.51389132F, 33.95315463F},
    {2.512141244F, 34.06023313F}, {2.510387074F, 34.16725789F},
    {2.508628811F, 34.27422801F}, {2.506866457F, 34.38114259F},
    {2.505100015F, 34.48800076F}, {2.503329488F, 34.59480164F},
    {2.501554877F, 34.70154435F}, {2.499776186F, 34.80822806F},
    {2.497993417F, 34.9148519F},  {2.496206572F, 35.02141504F},
    {2.494415655F, 35.12791665F}, {2.492620668F, 35.23435592F},
    {2.490821615F, 35.34073203F}, {2.489018497F, 35.44704418F},
    {2.487211319F, 35.55329159F}, {2.485400083F, 35.65947346F},
    {2.483584793F, 35.76558904F}, {2.481765452F, 35.87163756F},
    {2.479942063F, 35.97761827F}, {2.478114629F, 36.08353043F},
    {2.476283155F, 36.18937331F}, {2.474447643F, 36.2951462F},
    {2.472608097F, 36.40084837F}, {2.470764522F, 36.50647914F},
    {2.46891692F, 36.61203782F},  {2.467065295F, 36.71752372F},
    {2.465209653F, 36.82293619F}, {2.463349995F, 36.92827456F},
    {2.461486328F, 37.03353819F}, {2.459618653F, 37.13872645F},
    {2.457746977F, 37.24383871F}, {2.455871303F, 37.34887436F},
    {2.453991635F, 37.45383281F}, {2.452107978F, 37.55871346F},
    {2.450220337F, 37.66351573F}, {2.448328715F, 37.76823907F},
    {2.446433118F, 37.8728829F},  {2.44453355F, 37.9774467F},
    {2.442630016F, 38.08192992F}, {2.440722521F, 38.18633205F},
    {2.43881107F, 38.29065258F},  {2.436895667F, 38.39489101F},
    {2.434976318F, 38.49904685F}, {2.433053028F, 38.60311964F},
    {2.431125802F, 38.70710891F}, {2.429194645F, 38.81101422F},
    {2.427259563F, 38.91483512F}, {2.425320561F, 39.01857119F},
    {2.423377644F, 39.12222202F}, {2.421430819F, 39.22578721F},
    {2.41948009F, 39.32926636F},  {2.417525464F, 39.43265911F},
    {2.415566946F, 39.53596509F}, {2.413604541F, 39.63918394F},
    {2.411638257F, 39.74231533F}, {2.409668098F, 39.84535894F},
    {2.407694072F, 39.94831444F}, {2.405716183F, 40.05118154F},
    {2.403734438F, 40.15395994F}, {2.401748844F, 40.25664938F},
    {2.399759406F, 40.35924958F}, {2.397766131F, 40.4617603F},
    {2.395769026F, 40.5641813F},  {2.393768097F, 40.66651234F},
    {2.391763351F, 40.76875323F}, {2.389754794F, 40.87090376F},
    {2.387742433F, 40.97296374F}, {2.385726275F, 41.07493299F},
    {2.383706326F, 41.17681136F}, {2.381682594F, 41.2785987F},
    {2.379655086F, 41.38029487F}, {2.377623809F, 41.48189974F},
    {2.375588769F, 41.58341321F}, {2.373549975F, 41.68483519F},
    {2.371507433F, 41.78616557F}, {2.36946115F, 41.88740431F},
    {2.367411135F, 41.98855133F}, {2.365357394F, 42.08960659F},
    {2.363299936F, 42.19057006F}, {2.361238767F, 42.29144171F},
    {2.359173896F, 42.39222155F}, {2.35710533F, 42.49290958F},
    {2.355033077F, 42.59350581F}, {2.352957145F, 42.69401029F},
    {2.350877542F, 42.79442305F}, {2.348794276F, 42.89474415F},
    {2.346707355F, 42.99497367F}, {2.344616787F, 43.09511168F},
    {2.34252258F, 43.19515829F},  {2.340424744F, 43.29511361F},
    {2.338323285F, 43.39497775F}, {2.336218213F, 43.49475085F},
    {2.334109535F, 43.59443307F}, {2.331997262F, 43.69402456F},
    {2.3298814F, 43.79352549F},   {2.327761959F, 43.89293606F},
    {2.325638948F, 43.99225646F}, {2.323512375F, 44.09148691F},
    {2.32138225F, 44.19062762F},  {2.319248581F, 44.28967884F},
    {2.317111377F, 44.38864082F}, {2.314970647F, 44.48751381F},
    {2.312826401F, 44.58629811F}, {2.310678647F, 44.68499398F},
    {2.308527396F, 44.78360174F}, {2.306372655F, 44.88212169F},
    {2.304214436F, 44.98055416F}, {2.302052746F, 45.07889949F},
    {2.299887596F, 45.17715803F}, {2.297718995F, 45.27533014F},
    {2.295546954F, 45.37341619F}, {2.293371481F, 45.47141657F},
    {2.291192586F, 45.56933168F}, {2.289010279F, 45.66716192F},
    {2.286824571F, 45.76490773F}, {2.28463547F, 45.86256954F},
    {2.282442988F, 45.96014778F}, {2.280247134F, 46.05764293F},
    {2.278047918F, 46.15505544F}, {2.275845351F, 46.25238581F},
    {2.273639442F, 46.34963452F}, {2.271430203F, 46.44680208F},
    {2.269217643F, 46.54388901F}, {2.267001773F, 46.64089582F},
    {2.264782604F, 46.73782307F}, {2.262560145F, 46.8346713F},
    {2.260334409F, 46.93144107F}, {2.258105405F, 47.02813296F},
    {2.255873143F, 47.12474755F}, {2.253637636F, 47.22128543F},
    {2.251398894F, 47.31774721F}, {2.249156927F, 47.41413351F},
    {2.246911747F, 47.51044494F}, {2.244663365F, 47.60668216F},
    {2.242411792F, 47.7028458F},  {2.240157039F, 47.79893653F},
    {2.237899116F, 47.89495502F}, {2.235638037F, 47.99090194F},
    {2.233373811F, 48.08677798F}, {2.231106451F, 48.18258384F},
    {2.228835967F, 48.27832024F}, {2.226562371F, 48.37398789F},
    {2.224285675F, 48.46958751F}, {2.222005891F, 48.56511986F},
    {2.219723029F, 48.66058567F}, {2.217437103F, 48.75598571F},
    {2.215148122F, 48.85132074F}, {2.212856101F, 48.94659154F},
    {2.210561049F, 49.0417989F},  {2.20826298F, 49.1369436F},
    {2.205961904F, 49.23202646F}, {2.203657835F, 49.32704828F},
    {2.201350785F, 49.42200989F}, {2.199040765F, 49.51691211F},
    {2.196727787F, 49.61175579F}, {2.194411865F, 49.70654177F},
    {2.19209301F, 49.8012709F},   {2.189771235F, 49.89594405F},
    {2.187446552F, 49.9905621F},  {2.185118973F, 50.08512591F},
    {2.182788511F, 50.17963638F}, {2.18045518F, 50.2740944F},
    {2.17811899F, 50.36850087F},  {2.175779956F, 50.4628567F},
    {2.173438089F, 50.55716281F}, {2.171093403F, 50.65142013F},
    {2.168745911F, 50.74562957F}, {2.166395624F, 50.83979209F},
    {2.164042557F, 50.93390862F}, {2.161686722F, 51.02798012F},
    {2.159328132F, 51.12200755F}, {2.1569668F, 51.21599186F},
    {2.15460274F, 51.30993402F},  {2.152235965F, 51.40383503F},
    {2.149866487F, 51.49769585F}, {2.14749432F, 51.59151747F},
    {2.145119478F, 51.68530089F}, {2.142741973F, 51.77904711F},
    {2.14036182F, 51.87275714F},  {2.137979032F, 51.96643197F},
    {2.135593621F, 52.06007264F}, {2.133205603F, 52.15368015F},
    {2.130814989F, 52.24725553F}, {2.128421795F, 52.34079981F},
    {2.126026033F, 52.43431403F}, {2.123627718F, 52.52779923F},
    {2.121226862F, 52.62125644F}, {2.118823481F, 52.71468671F},
    {2.116417588F, 52.8080911F},  {2.114009196F, 52.90147066F},
    {2.11159832F, 52.99482644F},  {2.109184974F, 53.08815952F},
    {2.106769172F, 53.18147095F}, {2.104350928F, 53.2747618F},
    {2.101930255F, 53.36803314F}, {2.099507169F, 53.46128605F},
    {2.097081683F, 53.5545216F},  {2.094653811F, 53.64774088F},
    {2.092223568F, 53.74094497F}, {2.089790969F, 53.83413494F},
    {2.087356027F, 53.92731189F}, {2.084918758F, 54.0204769F},
    {2.082479174F, 54.11363107F}, {2.080037292F, 54.20677549F},
    {2.077593125F, 54.29991124F}, {2.075146688F, 54.39303943F},
    {2.072697996F, 54.48616114F}, {2.070247063F, 54.57927748F},
    {2.067793904F, 54.67238955F}, {2.065338534F, 54.76549844F},
    {2.062880967F, 54.85860524F}, {2.060421218F, 54.95171107F},
    {2.057959303F, 55.04481702F}, {2.055495235F, 55.13792418F},
    {2.05302903F, 55.23103367F},  {2.050560703F, 55.32414657F},
    {2.048090269F, 55.41726399F}, {2.045617743F, 55.51038702F},
    {2.043143139F, 55.60351676F}, {2.040666473F, 55.69665431F},
    {2.03818776F, 55.78980076F},  {2.035707016F, 55.88295721F},
    {2.033224254F, 55.97612476F}, {2.030739491F, 56.06930448F},
    {2.028252742F, 56.16249748F}, {2.025764022F, 56.25570483F},
    {2.023273346F, 56.34892763F}, {2.02078073F, 56.44216696F},
    {2.018286189F, 56.53542391F}, {2.015789739F, 56.62869954F},
    {2.013291394F, 56.72199493F}, {2.010791171F, 56.81531117F},
    {2.008289084F, 56.90864931F}, {2.00578515F, 57.00201043F},
    {2.003279384F, 57.09539559F}, {2.000771801F, 57.18880586F},
    {1.998262417F, 57.28224228F}, {1.995751248F, 57.37570591F},
    {1.99323831F, 57.46919781F},  {1.990723617F, 57.56271901F},
    {1.988207186F, 57.65627055F}, {1.985689033F, 57.74985349F},
    {1.983169173F, 57.84346883F}, {1.980647623F, 57.93711763F},
    {1.978124397F, 58.03080088F}, {1.975599512F, 58.12451963F},
    {1.973072983F, 58.21827486F}, {1.970544827F, 58.31206761F},
    {1.96801506F, 58.40589885F},  {1.965483697F, 58.4997696F},
    {1.962950754F, 58.59368085F}, {1.960416248F, 58.68763357F},
    {1.957880194F, 58.78162874F}, {1.955342608F, 58.87566734F},
    {1.952803507F, 58.96975034F}, {1.950262907F, 59.06387868F},
    {1.947720823F, 59.15805334F}, {1.945177272F, 59.25227524F},
    {1.94263227F, 59.34654534F},  {1.940085833F, 59.44086456F},
    {1.937537977F, 59.53523382F}, {1.934988719F, 59.62965405F},
    {1.932438074F, 59.72412616F}, {1.92988606F, 59.81865104F},
    {1.927332692F, 59.9132296F},  {1.924777986F, 60.00786272F},
    {1.922221959F, 60.10255127F}, {1.919664627F, 60.19729613F},
    {1.917106007F, 60.29209815F}, {1.914546114F, 60.38695821F},
    {1.911984965F, 60.48187713F}, {1.909422578F, 60.57685575F},
    {1.906858967F, 60.67189491F}, {1.904294149F, 60.76699541F},
    {1.901728141F, 60.86215808F}, {1.899160959F, 60.9573837F},
    {1.896592621F, 61.05267308F}, {1.894023141F, 61.14802698F},
    {1.891452537F, 61.24344619F}, {1.888880825F, 61.33893146F},
    {1.886308021F, 61.43448355F}, {1.883734143F, 61.53010319F},
    {1.881159207F, 61.62579113F}, {1.878583228F, 61.72154808F},
    {1.876006225F, 61.81737475F}, {1.873428213F, 61.91327184F},
    {1.870849209F, 62.00924004F}, {1.868269229F, 62.10528004F},
    {1.865688291F, 62.2013925F},  {1.86310641F, 62.29757807F},
    {1.860523604F, 62.39383741F}, {1.857939888F, 62.49017116F},
    {1.855355281F, 62.58657992F}, {1.852769797F, 62.68306433F},
    {1.850183455F, 62.77962497F}, {1.84759627F, 62.87626244F},
    {1.845008259F, 62.97297731F}, {1.842419439F, 63.06977016F},
    {1.839829827F, 63.16664154F}, {1.837239439F, 63.26359198F},
    {1.834648291F, 63.36062203F}, {1.832056402F, 63.45773219F},
    {1.829463787F, 63.55492298F}, {1.826870463F, 63.65219488F},
    {1.824276446F, 63.74954839F}, {1.821681754F, 63.84698396F},
    {1.819086403F, 63.94450205F}, {1.81649041F, 64.04210311F},
    {1.813893792F, 64.13978757F}, {1.811296565F, 64.23755584F},
    {1.808698745F, 64.33540833F}, {1.806100351F, 64.43334544F},
    {1.803501398F, 64.53136753F}, {1.800901903F, 64.62947498F},
    {1.798301883F, 64.72766814F}, {1.795701355F, 64.82594734F},
    {1.793100335F, 64.92431291F}, {1.79049884F, 65.02276517F},
    {1.787896886F, 65.12130441F}, {1.785294491F, 65.21993092F},
    {1.782691672F, 65.31864496F}, {1.780088444F, 65.41744681F},
    {1.777484825F, 65.51633669F}, {1.774880831F, 65.61531484F},
    {1.772276479F, 65.71438147F}, {1.769671786F, 65.81353679F},
    {1.767066768F, 65.91278099F}, {1.764461442F, 66.01211423F},
    {1.761855825F, 66.11153669F}, {1.759249933F, 66.21104849F},
    {1.756643783F, 66.31064978F}, {1.754037392F, 66.41034068F},
    {1.751430777F, 66.51012128F}, {1.748823953F, 66.60999167F},
    {1.746216938F, 66.70995193F}, {1.743609749F, 66.81000212F},
    {1.741002401F, 66.91014228F}, {1.738394912F, 67.01037244F},
    {1.735787298F, 67.11069262F}, {1.733179575F, 67.21110283F},
    {1.730571761F, 67.31160304F}, {1.727963872F, 67.41219323F},
    {1.725355925F, 67.51287335F}, {1.722747935F, 67.61364336F},
    {1.72013992F, 67.71450318F},  {1.717531896F, 67.81545272F},
    {1.714923879F, 67.91649188F}, {1.712315887F, 68.01762054F},
    {1.709707935F, 68.11883858F}, {1.70710004F, 68.22014585F},
    {1.704492219F, 68.32154219F}, {1.701884487F, 68.42302743F},
    {1.699276862F, 68.52460136F}, {1.69666936F, 68.6262638F},
    {1.694061997F, 68.72801452F}, {1.69145479F, 68.82985328F},
    {1.688847754F, 68.93177984F}, {1.686240907F, 69.03379393F},
    {1.683634265F, 69.13589528F}, {1.681027844F, 69.23808358F},
    {1.67842166F, 69.34035854F},  {1.675815729F, 69.44271983F},
    {1.673210068F, 69.54516711F}, {1.670604694F, 69.64770002F},
    {1.667999622F, 69.75031821F}, {1.665394868F, 69.85302128F},
    {1.662790449F, 69.95580885F}, {1.660186381F, 70.05868049F},
    {1.65758268F, 70.16163579F},  {1.654979362F, 70.2646743F},
    {1.652376443F, 70.36779556F}, {1.64977394F, 70.47099911F},
    {1.647171869F, 70.57428446F}, {1.644570244F, 70.67765111F},
    {1.641969083F, 70.78109855F}, {1.639368402F, 70.88462624F},
    {1.636768216F, 70.98823365F}, {1.634168542F, 71.09192022F},
    {1.631569395F, 71.19568537F}, {1.628970791F, 71.29952852F},
    {1.626372746F, 71.40344907F}, {1.623775276F, 71.5074464F},
    {1.621178397F, 71.61151989F}, {1.618582124F, 71.71566888F},
    {1.615986474F, 71.81989273F}, {1.613391462F, 71.92419076F},
    {1.610797103F, 72.02856229F}, {1.608203414F, 72.13300661F},
    {1.605610411F, 72.23752301F}, {1.603018108F, 72.34211077F},
    {1.600426521F, 72.44676915F}, {1.597835666F, 72.55149738F},
    {1.595245559F, 72.6562947F},  {1.592656214F, 72.76116032F},
    {1.590067648F, 72.86609346F}, {1.587479876F, 72.9710933F},
    {1.584892914F, 73.07615902F}, {1.582306776F, 73.18128978F},
    {1.579721478F, 73.28648473F}, {1.577137035F, 73.39174301F},
    {1.574553464F, 73.49706375F}, {1.571970778F, 73.60244605F},
    {1.569388993F, 73.70788901F}, {1.566808125F, 73.81339171F},
    {1.564228188F, 73.91895324F}, {1.561649198F, 74.02457264F},
    {1.559071169F, 74.13024897F}, {1.556494118F, 74.23598125F},
    {1.553918058F, 74.34176852F}, {1.551343005F, 74.44760977F},
    {1.548768973F, 74.553504F},   {1.546195979F, 74.6594502F},
    {1.543624035F, 74.76544735F}, {1.541053159F, 74.87149439F},
    {1.538483363F, 74.97759028F}, {1.535914663F, 75.08373395F},
    {1.533347074F, 75.18992434F}, {1.53078061F, 75.29616034F},
    {1.528215286F, 75.40244086F}, {1.525651117F, 75.50876479F},
    {1.523088117F, 75.61513101F}, {1.5205263F, 75.72153838F},
    {1.517965682F, 75.82798576F}, {1.515406276F, 75.934472F},
    {1.512848097F, 76.04099592F}, {1.51029116F, 76.14755634F},
    {1.507735478F, 76.25415209F}, {1.505181066F, 76.36078195F},
    {1.502627938F, 76.46744473F}, {1.500076109F, 76.57413919F},
    {1.497525592F, 76.68086411F}, {1.494976402F, 76.78761825F},
    {1.492428552F, 76.89440035F}, {1.489882057F, 77.00120916F},
    {1.487336931F, 77.10804339F}, {1.484793187F, 77.21490178F},
    {1.48225084F, 77.32178303F},  {1.479709903F, 77.42868583F},
    {1.477170391F, 77.53560889F}, {1.474632316F, 77.64255087F},
    {1.472095692F, 77.74951046F}, {1.469560534F, 77.8564863F},
    {1.467026855F, 77.96347707F}, {1.464494668F, 78.07048139F},
    {1.461963987F, 78.17749791F}, {1.459434825F, 78.28452526F},
    {1.456907196F, 78.39156204F}, {1.454381113F, 78.49860688F},
    {1.451856589F, 78.60565837F}, {1.449333638F, 78.71271511F},
    {1.446812273F, 78.81977568F}, {1.444292507F, 78.92683867F},
    {1.441774353F, 79.03390263F}, {1.439257824F, 79.14096614F},
    {1.436742934F, 79.24802775F}, {1.434229694F, 79.355086F},
    {1.431718119F, 79.46213944F}, {1.429208221F, 79.5691866F},
    {1.426700012F, 79.67622601F}, {1.424193506F, 79.78325618F},
    {1.421688715F, 79.89027564F}, {1.419185652F, 79.99728288F},
    {1.41668433F, 80.1042764F},   {1.41418476F, 80.21125471F},
    {1.411686956F, 80.31821628F}, {1.409190929F, 80.4251596F},
    {1.406696693F, 80.53208315F}, {1.404204259F, 80.63898539F},
    {1.40171364F, 80.74586478F},  {1.399224848F, 80.8527198F},
    {1.396737895F, 80.95954888F}, {1.394252794F, 81.06635048F},
    {1.391769555F, 81.17312305F}, {1.389288192F, 81.27986501F},
    {1.386808716F, 81.38657481F}, {1.384331139F, 81.49325087F},
    {1.381855473F, 81.59989162F}, {1.379381729F, 81.70649547F},
    {1.376909919F, 81.81306085F}, {1.374440056F, 81.91958616F},
    {1.371972149F, 82.02606981F}, {1.369506212F, 82.1325102F},
    {1.367042255F, 82.23890574F}, {1.36458029F, 82.34525483F},
    {1.362120328F, 82.45155585F}, {1.35966238F, 82.55780719F},
    {1.357206457F, 82.66400725F}, {1.354752572F, 82.7701544F},
    {1.352300734F, 82.87624703F}, {1.349850955F, 82.98228352F},
    {1.347403245F, 83.08826224F}, {1.344957616F, 83.19418156F},
    {1.342514079F, 83.30003986F}, {1.340072644F, 83.4058355F},
    {1.337633322F, 83.51156685F}, {1.335196123F, 83.61723228F},
    {1.332761058F, 83.72283015F}, {1.330328139F, 83.82835882F},
    {1.327897374F, 83.93381666F}, {1.325468774F, 84.03920201F},
    {1.323042351F, 84.14451324F}, {1.320618113F, 84.24974871F},
    {1.318196072F, 84.35490677F}, {1.315776236F, 84.45998578F},
    {1.313358618F, 84.56498408F}, {1.310943225F, 84.66990005F},
    {1.308530069F, 84.77473202F}, {1.306119159F, 84.87947835F},
    {1.303710505F, 84.98413739F}, {1.301304117F, 85.08870751F},
    {1.298900004F, 85.19318705F}, {1.296498176F, 85.29757436F},
    {1.294098642F, 85.4018678F},  {1.291701412F, 85.50606573F},
    {1.289306495F, 85.61016649F}, {1.286913901F, 85.71416846F},
    {1.284523638F, 85.81806998F}, {1.282135717F, 85.92186941F},
    {1.279750145F, 86.02556511F}, {1.277366932F, 86.12915544F},
    {1.274986088F, 86.23263878F}, {1.27260762F, 86.33601347F},
    {1.270231538F, 86.43927789F}, {1.26785785F, 86.5424304F},
    {1.265486566F, 86.64546937F}, {1.263117693F, 86.74839318F},
    {1.26075124F, 86.8512002F},   {1.258387217F, 86.95388881F},
    {1.25602563F, 87.05645739F},  {1.253666489F, 87.15890431F},
    {1.251309801F, 87.26122796F}, {1.248955575F, 87.36342673F},
    {1.246603819F, 87.46549901F}, {1.244254541F, 87.56744319F},
    {1.241907749F, 87.66925767F}, {1.23956345F, 87.77094086F},
    {1.237221653F, 87.87249114F}, {1.234882366F, 87.97390694F},
    {1.232545595F, 88.07518665F}, {1.230211349F, 88.1763287F},
    {1.227879635F, 88.27733151F}, {1.22555046F, 88.37819349F},
    {1.223223832F, 88.47891307F}, {1.220899758F, 88.57948869F},
    {1.218578246F, 88.67991878F}, {1.216259301F, 88.78020177F},
    {1.213942932F, 88.88033612F}, {1.211629146F, 88.98032028F},
    {1.209317949F, 89.08015268F}, {1.207009348F, 89.17983181F},
    {1.20470335F, 89.27935611F},  {1.202399961F, 89.37872406F},
    {1.200099188F, 89.47793414F}, {1.197801038F, 89.57698481F},
    {1.195505517F, 89.67587457F}, {1.193212632F, 89.77460191F},
    {1.190922388F, 89.87316533F}, {1.188634792F, 89.97156331F},
    {1.18634985F, 90.06979438F},  {1.184067567F, 90.16785705F},
    {1.181787951F, 90.26574983F}, {1.179511007F, 90.36347126F},
    {1.17723674F, 90.46101985F},  {1.174965157F, 90.55839416F},
    {1.172696263F, 90.65559273F}, {1.170430063F, 90.7526141F},
    {1.168166564F, 90.84945684F}, {1.16590577F, 90.9461195F},
    {1.163647686F, 91.04260067F}, {1.161392319F, 91.13889891F},
    {1.159139673F, 91.23501281F}, {1.156889753F, 91.33094097F},
    {1.154642564F, 91.42668198F}, {1.152398112F, 91.52223445F},
    {1.150156401F, 91.61759699F}, {1.147917435F, 91.71276822F},
    {1.14568122F, 91.80774677F},  {1.14344776F, 91.90253127F},
    {1.141217059F, 91.99712037F}, {1.138989123F, 92.09151272F},
    {1.136763954F, 92.18570697F}, {1.134541559F, 92.27970179F},
    {1.13232194F, 92.37349586F},  {1.130105102F, 92.46708785F},
    {1.127891049F, 92.56047645F}, {1.125679784F, 92.65366037F},
    {1.123471313F, 92.7466383F},  {1.121265638F, 92.83940896F},
    {1.119062763F, 92.93197107F}, {1.116862691F, 93.02432336F},
    {1.114665427F, 93.11646457F}, {1.112470974F, 93.20839345F},
    {1.110279334F, 93.30010874F}, {1.108090512F, 93.39160922F},
    {1.105904511F, 93.48289366F}, {1.103721333F, 93.57396083F},
    {1.101540981F, 93.66480952F}, {1.099363459F, 93.75543853F},
    {1.09718877F, 93.84584668F},  {1.095016915F, 93.93603276F},
    {1.092847899F, 94.02599562F}, {1.090681722F, 94.11573407F},
    {1.088518389F, 94.20524697F}, {1.086357901F, 94.29453316F},
    {1.08420026F, 94.3835915F},   {1.08204547F, 94.47242086F},
    {1.079893531F, 94.56102012F}, {1.077744447F, 94.64938816F},
    {1.075598219F, 94.73752388F}, {1.073454849F, 94.82542619F},
    {1.071314339F, 94.913094F},   {1.06917669F, 95.00052623F},
    {1.067041905F, 95.08772182F}, {1.064909984F, 95.17467971F},
    {1.06278093F, 95.26139884F},  {1.060654743F, 95.34787819F},
    {1.058531426F, 95.43411671F}, {1.056410979F, 95.52011339F},
    {1.054293403F, 95.60586722F}, {1.0521787F, 95.6913772F},
    {1.05006687F, 95.77664233F},  {1.047957914F, 95.86166163F},
    {1.045851833F, 95.94643412F}, {1.043748629F, 96.03095885F},
    {1.0416483F, 96.11523486F},   {1.039550849F, 96.19926119F},
    {1.037456274F, 96.28303693F}, {1.035364578F, 96.36656114F},
    {1.03327576F, 96.4498329F},   {1.031189819F, 96.53285131F},
    {1.029106757F, 96.61561547F}, {1.027026574F, 96.69812449F},
    {1.024949268F, 96.78037749F}, {1.022874841F, 96.86237361F},
    {1.020803292F, 96.94411199F}, {1.01873462F, 97.02559178F},
    {1.016668825F, 97.10681213F}, {1.014605906F, 97.18777222F},
    {1.012545864F, 97.26847122F}, {1.010488697F, 97.34890832F},
    {1.008434404F, 97.42908273F}, {1.006382985F, 97.50899365F},
    {1.004334439F, 97.58864029F}, {1.002288764F, 97.66802189F},
    {1.00024596F, 97.74713768F},  {0.998206026F, 97.8259869F},
    {0.996168959F, 97.90456881F}, {0.994134759F, 97.98288268F},
    {0.992103425F, 98.06092777F}, {0.990074954F, 98.13870338F},
    {0.988049345F, 98.21620879F}, {0.986026596F, 98.29344331F},
    {0.984006706F, 98.37040625F}, {0.981989672F, 98.44709692F},
    {0.979975493F, 98.52351467F}, {0.977964167F, 98.59965882F},
    {0.975955691F, 98.67552873F}, {0.973950063F, 98.75112376F},
    {0.971947281F, 98.82644327F}, {0.969947342F, 98.90148663F},
    {0.967950244F, 98.97625324F}, {0.965955984F, 99.05074249F},
    {0.96396456F, 99.12495378F},  {0.961975969F, 99.19888652F},
    {0.959990207F, 99.27254014F}, {0.958007273F, 99.34591406F},
    {0.956027163F, 99.41900773F}, {0.954049873F, 99.49182059F},
    {0.952075402F, 99.5643521F},  {0.950103744F, 99.63660173F},
    {0.948134898F, 99.70856895F}, {0.946168859F, 99.78025324F},
    {0.944205624F, 99.8516541F},  {0.94224519F, 99.92277102F},
    {0.940287552F, 99.99360352F}, {0.938332707F, 100.0641511F},
    {0.936380651F, 100.1344133F}, {0.93443138F, 100.2043897F},
    {0.93248489F, 100.2740798F},  {0.930541177F, 100.3434831F},
    {0.928600237F, 100.4125992F}, {0.926662064F, 100.4814277F},
    {0.924726656F, 100.5499681F}, {0.922794006F, 100.6182201F},
    {0.920864112F, 100.6861832F}, {0.918936968F, 100.753857F},
};

resistance_readings_t get_resistance_from_voltage(voltage_readings_t voltage) {
  float v_ref = 3.0F; // Reference voltage for thermistors
  float v_t = convert_voltage_human_readable(voltage);
  return (resistance_readings_t)((10000 * v_t) / (v_ref - v_t));
}

temp_c_readings_t get_temp_from_voltage(voltage_human_readable_t voltage) {
  // Binary Search algorithm, O(log(n)) lookup
  int32_t num_lut_elems =
      sizeof(voltage_temp_lut) / sizeof(voltage_temp_lut[0]);

  // Voltages are sorted from highest to lowest
  int32_t last = num_lut_elems - 1;
  int32_t first = 0;
  int32_t mid;

  if (voltage < voltage_temp_lut[last].voltage) {
    return voltage_temp_lut[first].temperature;
  }

  if (voltage > voltage_temp_lut[first].voltage) {
    return voltage_temp_lut[last].temperature;
  }

  while (first <= last) {
    mid = (first + last) / 2;

    if (voltage_temp_lut[mid].voltage < voltage) {
      last = mid - 1;
    } else {
      first = mid + 1;
    }
  }

  return voltage_temp_lut[last].temperature;

  /*
    // O(1) lookup, doesnt work with current LUT because voltages are not evenly
    // spaced

  int32_t last = num_lut_elems - 1; int32_t first = 0;

  if (voltage < voltage_temp_lut[last].voltage) {
    return voltage_temp_lut[first].temperature;
  }

  if (voltage > voltage_temp_lut[first].voltage) {
    return voltage_temp_lut[last].temperature;
  }

  uint32_t index = (uint32_t)(((voltage_temp_lut[first].voltage - voltage) /
                               (voltage_temp_lut[first].voltage -
                                voltage_temp_lut[last].voltage)) *
                              (num_lut_elems - 1));
  if (index >= num_lut_elems) {
    index = num_lut_elems - 1;
  }
  return voltage_temp_lut[index].temperature;
  */
}
